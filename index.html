<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía para Agentes de Contact Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 
    Chosen Palette: Dia Red & Neutral Gray
    Application Structure Plan: The application is structured as a multi-tab single-page application (SPA). It features a main navigation bar with three tabs: 'Presentación', 'Asignación de Tareas', and 'Gestión por Categoría'. This tabbed structure allows for a clear separation of concerns, providing a dedicated space for the introduction, the task lookup tool, and future procedural guides. It enhances user experience by organizing different functionalities into logical, easily accessible sections, making the tool more scalable.
    Visualization & Content Choices: The 'Presentación' tab uses a conceptual map layout (HTML/CSS) to visually introduce the tool's purpose. The 'Asignación de Tareas' tab reuses the dropdown-driven detail card for its specific lookup function. The 'Gestión por Categoría' tab now uses a master-detail layout, with a live search bar filtering the category list, which drives the content of a detail panel. Navigation is handled by vanilla JS.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f3f4f6; /* gray-100 */
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
        }
        .tab-button.active {
            border-bottom-color: #dc2626; /* red-600 */
            color: #111827; /* gray-900 */
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .result-card {
            transition: all 0.4s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
            display: none;
        }
        .result-card.visible {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        .criticidad-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            flex-shrink: 0;
        }
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        #result-tasks li {
            padding-left: 0.5rem;
        }
        .category-item {
            transition: all 0.2s ease;
        }
        .category-item.active {
            background-color: #dc2626;
            color: white;
        }
        .category-content {
            display: none;
        }
        .category-content.active {
            display: block;
        }
        .prose ul {
            list-style-type: disc;
            padding-left: 1.5rem;
        }
        .prose li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-12">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Guía Práctica para Agentes de Mantenimiento</h1>
        </header>

        <!-- Tab Navigation -->
        <nav class="flex justify-center border-b border-gray-200 mb-8">
            <button data-tab="presentacion" class="tab-button text-gray-500 font-semibold py-4 px-6">Presentación</button>
            <button data-tab="asignacion" class="tab-button text-gray-500 font-semibold py-4 px-6">Asignación de Tareas</button>
            <button data-tab="gestion" class="tab-button active text-gray-500 font-semibold py-4 px-6">Gestión por Categoría</button>
        </nav>

        <main>
            <!-- Tab 1: Presentación -->
            <div id="presentacion" class="tab-content">
                <div class="bg-white p-8 rounded-xl shadow-md text-center">
                    <h2 class="text-2xl font-bold text-red-600 mb-4">Nuestro Objetivo</h2>
                    <p class="text-gray-600 max-w-3xl mx-auto mb-8">Crear una guía ágil y práctica para los agentes del contact center, unificando la información clave para la gestión de mantenimiento de tiendas en un solo lugar.</p>
                    
                    <div class="border-t border-gray-200 pt-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-6">Puntos a Reforzar</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 text-left">
                            <div class="bg-gray-50 p-4 rounded-lg"><h4 class="font-bold text-red-600 mb-2">1. Comunicación</h4><p class="text-sm text-gray-600">Feedback constante en el chat del contact center.</p></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><h4 class="font-bold text-red-600 mb-2">2. Adherencia a Procesos</h4><p class="text-sm text-gray-600">Respetar siempre el orden de criticidad y los procesos al derivar casos.</p></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><h4 class="font-bold text-red-600 mb-2">3. Asignación</h4><p class="text-sm text-gray-600">Consultar siempre al responsable correcto para cada tarea.</p></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><h4 class="font-bold text-red-600 mb-2">4. Estandarización</h4><p class="text-sm text-gray-600">Centralizar la información para garantizar una gestión unificada y consistente.</p></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Asignación de Tareas -->
            <div id="asignacion" class="tab-content">
                <header class="text-center mb-12">
                     <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Asignación de Tareas y Responsabilidades</h1>
                     <p class="text-gray-600 max-w-2xl mx-auto">Selecciona un colaborador para ver sus tareas asignadas.</p>
                </header>
                 <section class="mb-12 bg-white p-6 rounded-xl shadow-md border-l-4 border-red-600">
                    <div class="flex items-start">
                        <div class="flex-shrink-0"><span class="inline-flex justify-center items-center w-8 h-8 rounded-full bg-red-600 text-white font-bold text-xl">!</span></div>
                        <div class="ml-4">
                            <h2 class="text-xl font-bold text-gray-900 mb-2">Puntos Clave para Agentes</h2>
                            <p class="text-gray-600 mb-4">Es responsabilidad de cada agente velar por dar feedback constante y derivar los casos respetando siempre la jerarquía de criticidad para asegurar el seguimiento correcto.</p>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <h3 class="font-semibold text-md mb-2 text-gray-800">Orden de Criticidad:</h3>
                                <ul class="space-y-2">
                                    <li class="flex items-center"><div class="criticidad-dot bg-red-600"></div><span class="font-medium text-red-600">Crítica</span></li>
                                    <li class="flex items-center"><div class="criticidad-dot bg-red-400"></div><span class="font-medium text-red-400">Urgente</span></li>
                                    <li class="flex items-center"><div class="criticidad-dot bg-yellow-400"></div><span class="font-medium text-yellow-500">Alta</span></li>
                                    <li class="flex items-center"><div class="criticidad-dot bg-green-500"></div><span class="font-medium text-green-600">Media</span></li>
                                    <li class="flex items-center"><div class="criticidad-dot bg-green-300"></div><span class="font-medium text-green-400">Baja</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="mb-8 max-w-lg mx-auto">
                    <label for="collaborator-select" class="block text-sm font-medium text-gray-700 mb-2">Seleccionar Colaborador:</label>
                    <div class="relative">
                        <select id="collaborator-select" class="w-full px-4 py-3 pr-10 rounded-lg border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition duration-300 shadow-sm bg-white cursor-pointer"><option value="">-- Elige un responsable --</option></select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-700"><div class="w-2 h-2 border-l-2 border-b-2 border-gray-500 transform rotate-[-45deg]"></div></div>
                    </div>
                </div>
                <div id="result-card" class="result-card max-w-lg mx-auto bg-white p-6 rounded-xl shadow-md border border-gray-200">
                     <div class="flex items-center mb-4">
                        <div id="result-initial" class="w-12 h-12 flex items-center justify-center rounded-full bg-red-600 text-white font-bold text-xl mr-4 flex-shrink-0"></div>
                        <h3 id="result-name" class="text-2xl font-bold text-gray-900"></h3>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-500 mb-2">Responsabilidades:</p>
                        <ul id="result-tasks" class="space-y-2 text-gray-700"></ul>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Gestión por Categoría -->
            <div id="gestion" class="tab-content active">
                <header class="text-center mb-12">
                    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Guía de Gestión por Categoría</h1>
                    <p class="text-gray-600 max-w-2xl mx-auto">Selecciona una categoría para ver el procedimiento detallado.</p>
                </header>
                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Category List & Search -->
                    <div class="w-full md:w-1/3 lg:w-1/4">
                        <div class="relative mb-4">
                            <input type="text" id="category-search" placeholder="Buscar categoría..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                            </div>
                        </div>
                        <div id="category-list" class="bg-white p-2 rounded-lg shadow-sm max-h-[60vh] overflow-y-auto">
                            <!-- Category items will be injected here -->
                        </div>
                    </div>
                    <!-- Category Detail -->
                    <div id="category-detail" class="w-full md:w-2/3 lg:w-3/4">
                        <!-- Content will be injected here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA ---
            const teamData = [
                { id: 1, name: 'Matias Alvarez', tasks: ['Fumigación por Roedores > Refuerzo'] },
                { id: 2, name: 'Thiago Caride', tasks: ['Cartelería', 'Cintas', 'GE (Generador Eléctrico)', 'Matafuegos', 'Puertas automaticas'] },
                { id: 3, name: 'Gabriela Dominguez', tasks: ['Balanzas / Básculas', 'Decomiso - Siniestros', 'Limpieza por cambio de gestión / pedido excepcional', 'Máquina de limpieza', 'Montacargas'] },
                { id: 4, name: 'Lucas Figueroa', tasks: ['Cortinas', 'Zorras'] },
                { id: 5, name: 'Daniel Strassera', tasks: [ '<strong>Cerrajería:</strong>', '  - Cerraduras Cajas (fuerte/chica)', '  - Cambio de cerradura de tienda / CDG', '  - Cerradura trabada / Puerta de ingreso', '<strong>Señalización de emergencia</strong>', '<strong>Vidrios Rajados</strong>' ] }
            ];

            const genericProcedureContent = `
                <div class="prose max-w-none">
                    <p class="font-semibold">El circuito de esta gestión corresponde a <strong>[Proveedor/Área]</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">[Categoría InvGate]</span>.</p>
                    <ul class="mt-4 space-y-3">
                        <li><strong>Paso 1: Análisis Inicial:</strong> El agente debe solicitar a la tienda detalles específicos sobre el problema.</li>
                        <li><strong>Paso 2: Verificación Previa:</strong> Es obligatorio revisar el historial para descartar tickets duplicados o en proceso.
                            <div class="flex space-x-2 mt-2">
                                <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                            </div>
                        </li>
                        <li><strong>Paso 3: Derivación:</strong> Derivar el caso al proveedor técnico o área interna correspondiente.</li>
                    </ul>
                </div>
            `;
            
            const fumigacionProcedureContent = `
                <div class="prose max-w-none">
                    <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Fumigación por Plagas otros > Refuerzo</span>.</p>
                    <ul class="mt-4 space-y-3">
                        <li><strong>Paso 1: Verificación y Contacto:</strong> Es obligatorio revisar el historial para descartar tickets duplicados. Adicionalmente, se debe contactar a la tienda para solicitar más información (fotos/videos). <br><strong class="text-red-600">La tienda debe indicar mediante fotos o videos la necesidad; de lo contrario, se rechaza el ticket. Es responsabilidad del agente categorizar bien el ticket.</strong>
                            <div class="flex space-x-2 mt-2">
                                <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                            </div>
                        </li>
                        <li><strong>Paso 2: Derivación y Coordinación:</strong> Se debe contactar de inmediato al proveedor asignado para coordinar el servicio.</li>
                        <li><strong>Paso 3: Contingencia y Presupuesto:</strong> Si el proveedor asignado no puede asistir, se debe elevar la queja vía mail a <span class="font-mono text-sm bg-gray-100 p-1 rounded">serv.gen.mantenimiento@diagroup.com</span>. Si no puede prestar el servicio, se debe verificar con un proveedor "facility" solicitando un presupuesto. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                        <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                    </ul>
                </div>
            `;

            const categoryProcedures = [
                { 
                    name: 'Adecuación de cerradura caja fuerte', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Cerrajería > Apertura y cambio de cerradura caja fuerte</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Análisis Inicial:</strong> Contactar a la tienda de inmediato (vía llamada, WhatsApp o mail) para solicitar detalles específicos del problema (fotos/videos). La gestión debe tratarse con urgencia.</li>
                                <li><strong>Paso 2: Verificación Previa:</strong> Es obligatorio revisar el historial para descartar tickets duplicados o en proceso.
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 3: Derivación y Coordinación:</strong> Se debe contactar de inmediato al <strong>Analista de Recaudación</strong> (vía grupo de WhatsApp) para consultar la próxima fecha de visita del camión de Brinks.</li>
                                <li><strong>Paso 4: Presupuesto y Planificación:</strong> Estos casos requieren visita planificada y presupuesto. Una vez obtenida la fecha de visita de Brinks, se coordina con el cerrajero externo para que realice la labor. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 5: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { name: 'Adecuación Matafuegos', criticality: 'Baja', content: genericProcedureContent }, 
                { 
                    name: 'Adecuación Montacargas Mal Uso', 
                    criticality: 'Baja', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Adecuación Montacargas Mal Uso</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Verificación y Contacto:</strong> Es obligatorio revisar el historial para descartar tickets duplicados. Adicionalmente, se debe contactar a la tienda para solicitar más información (fotos/videos). <br><strong class="text-red-600">La tienda nunca indicará que averió el equipo por mal uso; es responsabilidad del agente categorizar bien el ticket en función de la necesidad.</strong>
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 2: Derivación y Coordinación:</strong> Se debe contactar de inmediato al proveedor asignado para coordinar el servicio.</li>
                                <li><strong>Paso 3: Presupuesto y Planificación:</strong> En caso de que el proveedor solo realice una reparación provisoria, se requiere una visita planificada y un presupuesto formal para la solución definitiva. Se debe presionar al proveedor para obtener dicho presupuesto. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { name: 'Análisis de agua / Certificado de fumigacion / Limpieza de tanques', criticality: 'Baja', content: genericProcedureContent }, 
                { 
                    name: 'Apertura y cambio de cerradura caja chica', 
                    criticality: 'Urgente', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Cerrajería > Apertura y cambio de cerradura caja chica</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Análisis Inicial:</strong> Contactar a la tienda de inmediato (vía llamada, WhatsApp o mail) para solicitar detalles específicos del problema (fotos/videos). La gestión debe tratarse con urgencia.</li>
                                <li><strong>Paso 2: Verificación Previa:</strong> Es obligatorio revisar el historial para descartar tickets duplicados o en proceso.
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 3: Presupuesto y Planificación:</strong> Estos casos requieren visita planificada y presupuesto. Una vez obtenido y aprobado el presupuesto, se coordina con el cerrajero externo para que realice la labor. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { 
                    name: 'Arcos de seguridad', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>FENIX</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mant. tiendas Elect./Frio/Civil/Actas</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Responsabilidad Dividida:</strong> La instalación inicial es gestionada por <strong>Control de Pérdidas</strong>. Sin embargo, si el punto de conexión eléctrica (TOMA) no es adecuado, la adecuación de dicho toma corresponde a <strong>Mantenimiento</strong>.</li>
                                <li><strong>Verificación de Duplicados:</strong> Antes de proceder, es obligatorio revisar que el caso no esté duplicado.
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Acciones en el Ticket:</strong> Se debe editar el ticket para completar toda la información al 100% y luego derivarlo al proveedor externo (ELÉCTRICO) que corresponda según el informe nacional.</li>
                                <li><strong class="text-red-600">Requisito Indispensable:</strong> Es imperativo que el pedido original sea generado por la tienda a través de InvGate.</li>
                            </ul>
                        </div>
                    ` 
                }, 
                { name: 'Balanzas', criticality: 'Baja', content: genericProcedureContent }, { name: 'Cambio de Cerradura de tienda', criticality: 'Baja', content: genericProcedureContent }, { name: 'Carteleria', criticality: 'Media', content: genericProcedureContent }, 
                { 
                    name: 'CDG', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Cerrajería > CDG</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Autorización y Creación de Ticket:</strong> Estos servicios requieren autorización previa del Gerente de Ventas. El gerente debe activar el servicio mediante un mail por urgencia. El agente debe crear el ticket en InvGate adjuntando dicho mail como constancia. <br><strong class="text-red-600">No se podrá avanzar con la gestión si no está adjunto el mail que respalda el servicio.</strong></li>
                                <li><strong>Paso 2: Verificación Previa:</strong> Es obligatorio revisar el historial para descartar tickets duplicados o en proceso.
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 3: Derivación y Coordinación:</strong> Se debe contactar de inmediato al cerrajero asignado para coordinar el servicio.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    ` 
                }, 
                { name: 'Cerradura trabada / Puerta de ingreso', criticality: 'Alta', content: genericProcedureContent }, { name: 'Cinta Checkout', criticality: 'Media', content: genericProcedureContent }, { name: 'Civil > Corte de Pasto', criticality: 'Baja', content: genericProcedureContent }, { name: 'Colocación Matafuegos', criticality: 'Baja', content: genericProcedureContent }, { name: 'Cortina Lateral', criticality: 'Media', content: genericProcedureContent }, 
                { 
                    name: 'Cortina que impida la apertura o cierre', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Cerrajería > Reparación cortina que impida la apertura o cierre</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Verificación y Contacto:</strong> Es obligatorio revisar el historial para descartar tickets duplicados. Adicionalmente, se debe contactar a la tienda para solicitar más información (fotos/videos).
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 2: Derivación y Coordinación:</strong> Se debe contactar de inmediato al cortinero asignado para coordinar el servicio.</li>
                                <li><strong>Paso 3: Presupuesto y Planificación:</strong> En caso de que el proveedor solo realice una reparación provisoria, se requiere una visita planificada y un presupuesto formal para la solución definitiva. Se debe presionar al proveedor para obtener dicho presupuesto. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { 
                    name: 'Cortinas Mal Uso', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Cortinas Mal Uso</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Verificación y Contacto:</strong> Es obligatorio revisar el historial para descartar tickets duplicados. Adicionalmente, se debe contactar a la tienda para solicitar más información (fotos/videos). <br><strong class="text-red-600">La tienda nunca indicará que averió la cortina por mal uso; es responsabilidad del agente categorizar bien el ticket en función de la necesidad.</strong>
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 2: Derivación y Coordinación:</strong> Se debe contactar de inmediato al cortinero asignado para coordinar el servicio.</li>
                                <li><strong>Paso 3: Presupuesto y Planificación:</strong> En caso de que el proveedor solo realice una reparación provisoria, se requiere una visita planificada y un presupuesto formal para la solución definitiva. Se debe presionar al proveedor para obtener dicho presupuesto. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { 
                    name: 'Decomiso - Siniestros', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Retiros de Mercadería - Siniestros</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Verificación y Contacto:</strong> Es obligatorio revisar el historial para descartar tickets duplicados. Adicionalmente, se debe contactar a la tienda para solicitar más información (fotos/videos). <br><strong class="text-red-600">No se avanzará con ningún pedido de retiro de decomiso por siniestro sin la autorización previa de Prevención de Pérdidas. El OK debe estar adjunto mediante un print de pantalla.</strong>
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 2: Derivación y Coordinación:</strong> Una vez obtenida la autorización y verificada la cantidad de vehículos necesarios, se gestiona con urgencia con el proveedor asignado para coordinar el servicio.</li>
                                <li><strong>Paso 3: Contingencia y Presupuesto:</strong> Si el proveedor asignado no puede cumplir, es responsabilidad del agente solicitar un presupuesto de urgencia a un proveedor "facility". En este caso, se requiere una visita planificada y presupuesto formal. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { name: 'Equipamiento > Señalización de emergencia y otros', criticality: 'Baja', content: genericProcedureContent }, { name: 'Fumigación por Alacranes', criticality: 'Baja', content: fumigacionProcedureContent }, { name: 'Fumigación por Hormigas > Refuerzo', criticality: 'Baja', content: fumigacionProcedureContent }, { name: 'Fumigación por Palomas > Refuerzo', criticality: 'Baja', content: fumigacionProcedureContent }, { name: 'Fumigación por Plagas otros > Refuerzo', criticality: 'Baja', content: fumigacionProcedureContent }, { name: 'Fumigación por Roedores > Refuerzo', criticality: 'Alta', content: genericProcedureContent }, { name: 'Fumigación vencida', criticality: 'Critica', content: fumigacionProcedureContent }, { name: 'Fumigación/Desrratización', criticality: 'Alta', content: genericProcedureContent }, { name: 'GE (Generador Eléctrico)', criticality: 'Critica', content: genericProcedureContent }, { name: 'Limpieza > Limpieza por Apertura', criticality: 'Urgente', content: genericProcedureContent }, { name: 'Limpieza > Tienda', criticality: 'Urgente', content: genericProcedureContent }, { name: 'Máquina de limpieza', criticality: 'Baja', content: genericProcedureContent }, 
                { 
                    name: 'Montacargas', 
                    criticality: 'Critica', 
                    content: `
                        <div class="prose max-w-none">
                            <p class="font-semibold">El circuito de esta gestión corresponde a <strong>SSGG</strong> y la categoría es <span class="bg-gray-100 px-2 py-1 rounded-md text-sm">Mantenimiento de Tienda > Servicios Generales > Montacargas</span>.</p>
                            <ul class="mt-4 space-y-3">
                                <li><strong>Paso 1: Verificación y Contacto:</strong> Es obligatorio revisar el historial para descartar tickets duplicados. Adicionalmente, se debe contactar a la tienda para solicitar más información (fotos/videos).
                                    <div class="flex space-x-2 mt-2">
                                        <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank" class="text-red-600 underline">Revisar en Looker</a>
                                        <a href="https://dia.cloud.invgate.net/user/profile/public/id/5372" target="_blank" class="text-red-600 underline">Ver perfil en InvGate</a>
                                    </div>
                                </li>
                                <li><strong>Paso 2: Derivación y Coordinación:</strong> Se debe contactar de inmediato al proveedor asignado para coordinar el servicio. <br><strong class="text-red-600">Para el proveedor Excell: después de las 17hs, fines de semana y feriados, además del mail, se debe llamar a la guardia (NO ENVIAR WHATSAPP). Si Excell no puede prestar servicio, recurrir a un facility.</strong></li>
                                <li><strong>Paso 3: Presupuesto y Planificación:</strong> En caso de que el proveedor solo realice una reparación provisoria, se requiere una visita planificada y un presupuesto formal para la solución definitiva. Se debe presionar al proveedor para obtener dicho presupuesto. Seguir el <a href="https://daviddia2.github.io/Flujo-de-Gesti-n-de-Tickets/" target="_blank" class="text-red-600 underline">flujo administrativo SSGG</a>.</li>
                                <li><strong>Paso 4: Cierre:</strong> El proveedor informa la finalización adjuntando el remito en InvGate. El agente debe enviar la solicitud de solución a la tienda para su conformidad.</li>
                            </ul>
                        </div>
                    `
                }, 
                { name: 'Portaprecios', criticality: 'Baja', content: genericProcedureContent }, { name: 'Puertas Automaticas', criticality: 'Alta', content: genericProcedureContent }, { name: 'Red de Incendio > Hidrantes', criticality: 'Baja', content: genericProcedureContent }, { name: 'Red de Incendio > Sensores de Humos', criticality: 'Baja', content: genericProcedureContent }, { name: 'Retiro de Basura', criticality: 'Critica' }, { name: 'Vidrios Rajados', criticality: 'Critica' }
            ];
            
            // --- TAB SWITCHING LOGIC ---
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            function switchTab(tabId) {
                 tabButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.tab === tabId));
                 tabContents.forEach(content => content.classList.toggle('active', content.id === tabId));
            }

            tabButtons.forEach(button => {
                button.addEventListener('click', () => switchTab(button.dataset.tab));
            });
            
            // --- ASIGNACIÓN DE TAREAS LOGIC ---
            const collaboratorSelect = document.getElementById('collaborator-select');
            if (collaboratorSelect) {
                const resultCard = document.getElementById('result-card');
                const resultInitial = document.getElementById('result-initial');
                const resultName = document.getElementById('result-name');
                const resultTasks = document.getElementById('result-tasks');
                
                teamData.sort((a, b) => a.name.localeCompare(b.name)).forEach(member => {
                    const option = document.createElement('option');
                    option.value = member.id;
                    option.textContent = member.name;
                    collaboratorSelect.appendChild(option);
                });

                collaboratorSelect.addEventListener('change', (e) => {
                    const selectedId = e.target.value;
                    if (!selectedId) {
                        resultCard.classList.remove('visible');
                        return;
                    }
                    const selectedMember = teamData.find(member => member.id == selectedId);
                    if (selectedMember) {
                        resultInitial.textContent = selectedMember.name.charAt(0);
                        resultName.textContent = selectedMember.name;
                        resultTasks.innerHTML = '';
                        selectedMember.tasks.forEach(task => {
                            const li = document.createElement('li');
                            li.innerHTML = task.replace(/  -/g, '&nbsp;&nbsp;&nbsp;&nbsp;-');
                            
                            if (task.startsWith('<strong>')) {
                                li.className = 'list-none ml-[-1rem] mt-2 font-bold text-gray-800';
                            } else {
                               li.className = 'font-semibold text-gray-700';
                            }
                            resultTasks.appendChild(li);
                        });
                        resultCard.classList.add('visible');
                    }
                });
            }

            // --- GESTIÓN POR CATEGORÍA LOGIC ---
            const criticalityOrder = { 'critica': 1, 'urgente': 2, 'alta': 3, 'media': 4, 'baja': 5 };
            const categoryList = document.getElementById('category-list');
            const categoryDetail = document.getElementById('category-detail');
            const categorySearch = document.getElementById('category-search');

            function getCriticalityDotColor(criticality) {
                const level = criticality.toLowerCase();
                if (level === 'critica') return 'bg-red-600';
                if (level === 'urgente') return 'bg-red-400';
                if (level === 'alta') return 'bg-yellow-400';
                if (level === 'media') return 'bg-green-500';
                if (level === 'baja') return 'bg-green-300';
                return 'bg-gray-400';
            }
            
            function renderCategories(filter = '') {
                 categoryList.innerHTML = '';
                 const filteredCategories = categoryProcedures.filter(cat => cat.name.toLowerCase().includes(filter.toLowerCase()));
                 
                 filteredCategories.sort((a, b) => {
                    const orderA = criticalityOrder[a.criticality.toLowerCase()] || 99;
                    const orderB = criticalityOrder[b.criticality.toLowerCase()] || 99;
                    if (orderA !== orderB) {
                        return orderA - orderB;
                    }
                    return a.name.localeCompare(b.name);
                }).forEach(cat => {
                    const button = document.createElement('button');
                    button.dataset.categoryId = cat.name;
                    button.className = 'category-item w-full text-left px-4 py-2 rounded-lg font-medium text-gray-700 hover:bg-red-100 flex items-center';
                    const dot = document.createElement('div');
                    dot.className = `criticidad-dot ${getCriticalityDotColor(cat.criticality)}`;
                    const text = document.createElement('span');
                    text.textContent = cat.name;
                    button.appendChild(dot);
                    button.appendChild(text);
                    categoryList.appendChild(button);
                });
            }

            if (categoryList && categoryDetail) {
                renderCategories();

                categoryList.addEventListener('click', (e) => {
                    const button = e.target.closest('button.category-item');
                    if (button) {
                        const categoryId = button.dataset.categoryId;
                        const procedure = categoryProcedures.find(p => p.name === categoryId);
                        document.querySelectorAll('.category-item').forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        if (procedure) {
                            let content = procedure.content;
                            if (content === '...') { // Restore generic content if it was a placeholder
                                content = genericProcedureContent.replace(/\[Categoría InvGate\]/g, `<span class="bg-gray-100 px-2 py-1 rounded-md text-sm">${procedure.name}</span>`);
                            }
                            
                            categoryDetail.innerHTML = `
                                <div class="bg-white p-8 rounded-xl shadow-md sticky top-6">
                                    <div class="flex items-center mb-4">
                                        <div class="criticidad-dot ${getCriticalityDotColor(procedure.criticality)}"></div>
                                        <h3 class="text-2xl font-bold text-gray-900">${procedure.name}</h3>
                                    </div>
                                    <div class="text-gray-600">
                                        ${content || '<p>Procedimiento no definido.</p>'}
                                    </div>
                                </div>
                            `;
                        }
                    }
                });
                
                categorySearch.addEventListener('input', (e) => {
                    renderCategories(e.target.value);
                });

                const firstCategoryButton = document.querySelector('.category-item');
                if(firstCategoryButton) {
                    firstCategoryButton.click();
                }
            }
            
            // Set initial active tab
            switchTab('gestion');
        });
    </script>
</body>
</html>
